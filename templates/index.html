<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ğŸï¸ Biker Trip Planner AI</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="container">
    <h1>ğŸï¸ Biker Trip Planner AI</h1>
    <p class="subtitle">
        Plan motorcycle routes, travel time, and must-visit spots using AI
    </p>

    <!-- Input Section -->
    <div class="input-box">
        <input
            type="text"
            id="start"
            placeholder="Starting location (e.g., Bangalore)"
        >
        <input
            type="text"
            id="destination"
            placeholder="Destination (e.g., Coorg)"
        >
        <button onclick="generate()">Plan Ride</button>
    </div>

    <!-- Error Message -->
    <div id="error-box" class="error-box"></div>

    <!-- Loader -->
    <div id="loader" class="loader hidden"></div>

    <!-- Output -->
    <div id="output" class="output hidden">

        <div class="card">
            <h2>ğŸ›£ï¸ Route Plan & Waypoints</h2>
            <div id="route"></div>
        </div>

        <div class="card highlight">
            <h2>â±ï¸ Estimated Travel Time</h2>
            <div id="time"></div>
        </div>

        <div class="card">
            <h2>ğŸ“ Places to Visit Near Destination</h2>
            <div id="places"></div>
        </div>

    </div>
</div>

<script>
function showError(message) {
    const errorBox = document.getElementById("error-box");
    errorBox.innerText = message;
    errorBox.style.display = "block";
}

function clearError() {
    const errorBox = document.getElementById("error-box");
    errorBox.innerText = "";
    errorBox.style.display = "none";
}

function generate() {
    const start = document.getElementById("start").value.trim();
    const destination = document.getElementById("destination").value.trim();
    const loader = document.getElementById("loader");
    const output = document.getElementById("output");
    const button = document.querySelector("button");

    clearError();

    if (!start || !destination) {
        showError("Please enter both starting location and destination.");
        return;
    }

    loader.classList.remove("hidden");
    output.classList.add("hidden");
    button.disabled = true;

    fetch("/generate", {
        method: "POST",
        headers: {
            "Content-Type": "application/json"
        },
        body: JSON.stringify({ start, destination })
    })
    .then(res => res.json())
    .then(data => {
        if (data.error) {
            showError(data.error);
            return;
        }

        document.getElementById("route").innerHTML = data.route_plan;
        document.getElementById("time").innerHTML = data.travel_time;
        document.getElementById("places").innerHTML = data.places_to_visit;

        output.classList.remove("hidden");
    })
    .catch(() => {
        showError("Something went wrong. Please try again.");
    })
    .finally(() => {
        loader.classList.add("hidden");
        button.disabled = false;
    });
}
</script>

</body>
</html>
